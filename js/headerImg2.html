<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>JS Bin</title>
    <style>
        html {
            background: white;
        }

        html,
        body {
            margin: 0;
            /*     background: #000; */
            /* color: #fff; */
            width: 100%;
            max-width: 480px;
            /*     height: 100%; */
            overflow-x: hidden;
            margin: 0 auto;
        }

        img {

            display: block;
        }

        body {

            /*     background: #000; */
        }

        #demo {

            text-align: center;
            height: 1000px;
            /* color: orange; */
            background-color: #ddd;
        }

        #container {
            width: 100%;
            /*     height: 100%; */
            padding: 10px 0 0 0;
            /*     background: orange; */
        }

        #radius {
            position: relative;
            z-index: 2;

        }

        #test22 {
            width: 1px;
            height: 1px;
            background: #000;
            position: fixed;
            z-index: -10;
        }

        #loading {
            /*     display: block; */
            width: 32px;
            margin: 25px auto 0;
        }
    </style>
</head>

<body>
    <div id="radius">
        <img width="100%" src="http://uniquefacts.net/wp-content/uploads/2015/09/cats-purr.jpeg" alt="">
    </div>

    <div id="demo">
            <div class="article-content">新华社银川5月12日电（记者杨稳玺）记者近日从宁夏教育厅了解到，为全面加强师德师风建设，宁夏将把师德考核摆在教师考核首位，将师德考核结果纳入教师个人师德档案、教师绩效考核、事业单位工作人员年度考核和诚信体系记载当中，并作为教师资格定期注册、职称评聘和评先评优的重要依据，实行师德问题“一票否决”。</div>

        <div id="loading">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="orange" style="
">
                <path opacity=".25" d="M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4" />
                <path d="M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z" transform="">

                </path>
            </svg>
        </div>
        <div id="container">
            往下拖动看效果
        </div>

    </div>
    <div id="test22"></div>
</body>
<script>
    // ;(function(d) {
    //   d.addEventListener('touchstart', handler)
    //   d.addEventListener('touchmove', handler)
    //   function handler(e) {
    //       e.preventDefault()
    //   } 
    // })(document.body)


    ;//demo,body.radius,loading
    (function (d, d2, c, icon) {
        var isTouch = 'ontouchstart' in d
        var event = {
            start: isTouch ? 'touchstart' : 'mousedown',
            move: isTouch ? 'touchmove' : 'mousemove',
            end: isTouch ? 'touchend' : 'mouseup'
        }
        var t = {}
        d2.addEventListener(event.start, function (e) {
            t.stime = new Date()
            t.flag = true
            d.style['-webkit-transition'] = 'none'
            c.style['-webkit-transition'] = 'none'
            icon.style['-webkit-transition'] = 'none'
                    d.style['transition'] = 'none'
            t.y = e.touches ? e.touches[0].pageY : e.pageY
            t.y2 = e.touches ? e.touches[0].pageY : e.pageY
        })
        d2.addEventListener(event.move, function (e) {
            if (d2.scrollTop == 0) {

                if (!t.flag) return
                //           alert(1)
                var y = e.changedTouches ? e.changedTouches[0].pageY : e.pageY
                t.distance = y - t.y
                if (t.distance > 0) {
                    e.preventDefault()
                    d.style['-webkit-transform'] = 'translate3d(0, ' + (t.distance / 2.4) + 'px, 0)'
                    var scale = t.distance / 1000
                    c.style['-webkit-transform'] = 'scale(' + (1 + scale) + ')'
                    // icon.style['-webkit-transform'] = 'rotate(' + (t.distance / 1) + 'deg)'


                }
            } else {
                document.querySelector('#container').innerHTML = d2.scrollTop
                if (d2.scrollTop == 0) {
                    alert(1)
                    e.preventDefault()
                }
            }

        })
        d2.addEventListener(event.end, function (e) {
            t.flag = false
            if (d2.scrollTop > 0) return
            var etime = +(new Date) - t.stime
            d.style['-webkit-transition'] = '0.4s'
            c.style['-webkit-transition'] = '0.4s'
            // icon.style['-webkit-transition'] = '0.4s'
            setTimeout(function () {
                d.style['-webkit-transform'] = 'translate3d(' + 0 + 'px, 0, 0)'
                c.style['-webkit-transform'] = 'scale(' + 1 + ')'
                // icon.style['-webkit-transform'] = 'rotate(' + 0 + 'deg)'
            }, 0)


            var distance = Math.abs(t.distance)
            if ((distance / etime > 0.55 && distance > 5) || distance > 2000) {
                //             alert('翻页')
            }

        })

    })(document.querySelector("#demo"), document.body, document.querySelector('#radius'), document.querySelector(
        '#loading'))
</script>

</html>